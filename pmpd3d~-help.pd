#N canvas 700 38 722 886 10;
#X msg 30 74 reset;
#X obj 30 836 dac~;
#X msg 93 498 posX \$1 \$2;
#X msg 98 521 forceX \$1 \$2;
#X obj 229 768 osc~ 444;
#X text 69 74 clear everything;
#X text 110 797 arg1 : number of audio inlets (min 1);
#X text 110 811 arg2 : number of audio outlets (min 1);
#X msg 183 591 setD \$1 \$2;
#X msg 110 591 setK \$1 \$2;
#X msg 104 556 setM \$1 \$2;
#X msg 74 243 inForceX \$1 \$2 \$3;
#X msg 79 297 inPosX \$1 \$2 \$3;
#X msg 189 243 inForceY \$1 \$2 \$3;
#X msg 182 297 inPosY \$1 \$2 \$3;
#X msg 83 368 outPosX \$1 \$2 \$3;
#X msg 193 368 outPosY \$1 \$2 \$3;
#X msg 93 425 outSpeed \$1 \$2 \$3;
#X msg 87 403 outSpeedX \$1 \$2 \$3;
#X msg 208 403 outSpeedY \$1 \$2 \$3;
#X msg 168 498 posY \$1 \$2;
#X msg 183 521 forceY \$1 \$2;
#X msg 257 591 setL \$1 \$2;
#X obj 30 798 pmpd3d~ 1 1;
#X msg 41 108 mass \$1 \$2 \$3 \$4 \$5;
#X msg 286 297 inPosZ \$1 \$2 \$3;
#X msg 303 368 outPosZ \$1 \$2 \$3;
#X msg 330 403 outSpeedZ \$1 \$2 \$3;
#X msg 305 243 inForceZ \$1 \$2 \$3;
#X msg 241 498 posZ \$1 \$2;
#X msg 268 521 forceZ \$1 \$2;
#X msg 177 556 setDEnv \$1 \$2;
#X msg 268 556 setDEnvOffset \$1 \$2;
#X msg 52 146 link \$1 \$2 \$3 \$4 \$5;
#X msg 169 737 bang;
#X msg 64 177 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X text 19 38 all these messages need to be sent only once to create the structure of a physical model:;
#X text 168 97 create a mass with arguments : weight of the mass (\$1) \, initial position X Y Z (\$2 \, \$3 and \$4) \, and velocity damping (\$5). A mass with weight 0 will not move., f 65;
#X text 178 140 connect two masses (\$1 and \$2) with link rigidity \$3 \, damping \$4 and length \$5;
#X text 256 176 like the link message \, but with extra arguments :;
#X text 277 191 \$5 is the exponent for the non-linear rigidity;
#X text 277 205 \$6 is the length of the link;
#X text 277 219 \$7 and \$8 are the min and max length of the link;
#X text 98 320 the same inlet can be used to move several masses and send forces to them through multiple inForce and inPos messages for this inlet, f 90;
#X text 89 265 you can send many forces to a single mass \, the resulting force will be the sum of all forces, f 92;
#X text 113 447 the output of an outlet is the sum of the contributions of all out* messages, f 76;
#X text 93 478 these messages interact with the simulation in real time:;
#X text 311 497 change the position \$2 of a fixed mass \$1;
#X text 351 520 send force \$2 to mass \$1;
#X text 397 550 change mass settings (mass \, damping and offset of the damping (to impose a velocity), f 44;
#X text 153 6 pmpd3d~ : 3d particle-based physical modeling for audio synthesis, f 66;
#X text 203 736 print the current state of the model in the console;
#X text 284 767 interaction with the simulation at audio rate;
#X text 413 344 connect the X \, Y or Z position of mass \$2 to outlet \$1 with amplitude \$3, f 38;
#X text 420 237 signal on inlet \$1 sends force in X \, Y or Z direction to mass \$2 with amplitude \$3, f 41;
#X text 389 290 signal on inlet \$1 controls the X \, Y or Z position of mass \$2 with amplitude \$3, f 41;
#X text 452 398 connect the velocity of mass \$2 to outlet \$1 with amplitude \$3 (for X \, Y \, Z direction or overall velocity), f 35;
#X text 110 825 arg3 : oversample factor (useful to run the simulation faster than audio rate);
#X msg 331 591 setLCurrent \$1 \$2;
#X text 445 580 change link settings: rigidity \, damping \, length and mix between set length and current length (0..1), f 35;
#X msg 121 650 setNLD \$1 \$2;
#X msg 206 650 setNLL \$1 \$2;
#X text 287 650 change damping and length of NLlink;
#X text 327 672 change min and max length of NLlink;
#X msg 125 672 setNLLMin \$1 \$2;
#X msg 227 672 setNLLMax \$1 \$2;
#X text 305 627 change rigidity and rigidity exponent of NLlink;
#X msg 131 694 setNLLCurrent \$1 \$2;
#X text 254 694 mix between set length and current length (0..1) of NLlink;
#X msg 204 628 setNLKPow \$1 \$2;
#X msg 118 628 setNLK \$1 \$2;
#X connect 0 0 23 0;
#X connect 2 0 23 0;
#X connect 3 0 23 0;
#X connect 4 0 23 0;
#X connect 9 0 23 0;
#X connect 10 0 23 0;
#X connect 11 0 23 0;
#X connect 12 0 23 0;
#X connect 15 0 23 0;
#X connect 17 0 23 0;
#X connect 18 0 23 0;
#X connect 23 0 1 0;
#X connect 23 0 1 1;
#X connect 24 0 23 0;
#X connect 33 0 23 0;
#X connect 34 0 23 0;
#X connect 35 0 23 0;
#X connect 60 0 23 0;
#X connect 64 0 23 0;
#X connect 67 0 23 0;
#X connect 70 0 23 0;
