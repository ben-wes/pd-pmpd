#N canvas 719 37 722 886 10;
#X msg 30 74 reset;
#X obj 31 831 dac~;
#X msg 190 553 posX \$1 \$2;
#X msg 202 573 forceX \$1 \$2;
#X text 117 821 arg3 : oversample factor (usefull to run the simulation faster than audio rate);
#X obj 231 768 osc~ 444;
#X text 68 73 clear everything;
#X text 117 792 arg1 : number of audio inlets (min 1);
#X text 117 806 arg2 : number of audio outlets (min 1);
#X msg 287 689 setD \$1 \$2;
#X msg 274 668 setK \$1 \$2;
#X msg 220 600 setM \$1 \$2;
#X msg 103 237 inForceX \$1 \$2 \$3;
#X msg 131 305 inPosX \$1 \$2 \$3;
#X msg 114 258 inForceY \$1 \$2 \$3;
#X msg 141 326 inPosY \$1 \$2 \$3;
#X msg 160 372 outPosX \$1 \$2 \$3;
#X msg 173 393 outPosY \$1 \$2 \$3;
#X msg 205 504 outSpeed \$1 \$2 \$3;
#X msg 181 441 outSpeedX \$1 \$2 \$3;
#X msg 188 462 outSpeedY \$1 \$2 \$3;
#X msg 265 553 posY \$1 \$2;
#X msg 288 573 forceY \$1 \$2;
#X msg 299 710 setL \$1 \$2;
#X text 364 688 change links settings;
#X obj 30 793 pmpd3d~ 1 1;
#X msg 44 100 mass \$1 \$2 \$3 \$4 \$5;
#X msg 151 347 inPosZ \$1 \$2 \$3;
#X msg 183 414 outPosZ \$1 \$2 \$3;
#X msg 198 483 outSpeedZ \$1 \$2 \$3;
#X msg 128 279 inForceZ \$1 \$2 \$3;
#X msg 339 553 posZ \$1 \$2;
#X msg 375 573 forceZ \$1 \$2;
#X msg 239 621 setDEnv \$1 \$2;
#X msg 254 642 setDEnvOffset \$1 \$2;
#X msg 54 137 link \$1 \$2 \$3 \$4 \$5;
#X msg 274 739 bang;
#X msg 70 170 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X text 19 38 all these messages need to be sent only once to create the structure of a physical model:;
#X text 170 91 create a mass with arguments : weight of the mass (\$1) \, initial position X Y Z (\$2 \, \$3 and \$4) \, and velocity damping (\$5). A mass with weight 0 will not move., f 65;
#X text 180 131 connect two masses (\$1 and \$2) with link rigidity \$3 \, damping \$4 and length \$5;
#X text 302 166 like the link message \, but with extra arguments :;
#X text 323 181 \$5 is the exponent for the non-linear rigidity;
#X text 323 196 \$6 is the length of the link;
#X text 323 211 \$7 and \$8 are the min and max length of the link;
#X text 234 238 signal on inlet \$1 sends force in X- \, Y- or Z-direction to mass \$2 with amplitude \$3;
#X text 247 307 signal on inlet \$1 controls the X- \, Y- or Z-position of mass \$2 with amplitude \$3;
#X text 279 333 the same inlet can be used to move several masses and send forces to them through multiple inForce and inPos messages for this inlet, f 67;
#X text 259 264 you can send many forces to a single mass \, the resulting force will be the sum of all forces;
#X text 288 384 connect the X- \, Y- or Z-position of mass \$2 to outlet \$1 with amplitude \$3;
#X text 326 493 the output of an outlet is the sum of the contributions of all out* messages;
#X text 315 451 connect the velocity of mass \$2 to outlet \$1 with amplitude \$3 (either for X- \, Y- or Z-direction or overall velocity), f 62;
#X text 187 534 these messages interact with the simulation in real time:;
#X text 409 552 change the position \$2 of a fixed mass \$1;
#X text 457 573 send force \$2 to mass \$1;
#X text 333 614 change mass settings (mass \, damping and offset of the damping (to impose a velocity), f 44;
#X text 153 6 pmpd3d~ : 3d particle-based physical modeling for audio synthesis, f 66;
#X text 317 739 print the current state of the model in the console;
#X text 284 767 interaction with the simulation at audio rate;
#X connect 0 0 25 0;
#X connect 2 0 25 0;
#X connect 3 0 25 0;
#X connect 5 0 25 0;
#X connect 9 0 25 0;
#X connect 10 0 25 0;
#X connect 11 0 25 0;
#X connect 12 0 25 0;
#X connect 13 0 25 0;
#X connect 14 0 25 0;
#X connect 15 0 25 0;
#X connect 16 0 25 0;
#X connect 17 0 25 0;
#X connect 18 0 25 0;
#X connect 19 0 25 0;
#X connect 20 0 25 0;
#X connect 21 0 25 0;
#X connect 22 0 25 0;
#X connect 23 0 25 0;
#X connect 25 0 1 0;
#X connect 25 0 1 1;
#X connect 26 0 25 0;
#X connect 27 0 25 0;
#X connect 28 0 25 0;
#X connect 29 0 25 0;
#X connect 30 0 25 0;
#X connect 31 0 25 0;
#X connect 32 0 25 0;
#X connect 33 0 25 0;
#X connect 34 0 25 0;
#X connect 35 0 25 0;
#X connect 36 0 25 0;
#X connect 37 0 25 0;
