#N canvas 722 37 749 891 10;
#X msg 30 74 reset;
#X text 302 166 like the link message \, but with extra arguments :;
#X obj 31 851 dac~;
#X msg 190 551 posX \$1 \$2;
#X msg 202 571 forceX \$1 \$2;
#X text 117 841 arg3 : oversample factor (usefull to run the simulation faster than audio rate);
#X obj 231 788 osc~ 444;
#X text 68 73 clear everything;
#X text 117 812 arg1 : number of audio inlets (min 1);
#X text 117 826 arg2 : number of audio outlets (min 1);
#X msg 287 695 setD \$1 \$2;
#X msg 274 673 setK \$1 \$2;
#X msg 220 601 setM \$1 \$2;
#X obj 30 813 pmpd2d~ 1 1;
#X msg 103 246 inForceX \$1 \$2 \$3;
#X msg 131 305 inPosX \$1 \$2 \$3;
#X msg 115 271 inForceY \$1 \$2 \$3;
#X msg 141 328 inPosY \$1 \$2 \$3;
#X msg 160 372 outPosX \$1 \$2 \$3;
#X msg 173 396 outPosY \$1 \$2 \$3;
#X msg 197 473 outSpeed \$1 \$2 \$3;
#X msg 181 429 outSpeedX \$1 \$2 \$3;
#X msg 188 451 outSpeedY \$1 \$2 \$3;
#X msg 267 551 posY \$1 \$2;
#X msg 44 100 mass \$1 \$2 \$3 \$4;
#X msg 290 571 forceY \$1 \$2;
#X msg 299 717 setL \$1 \$2;
#X msg 239 623 setDEnv \$1 \$2;
#X msg 254 645 setDEnvoffset \$1 \$2;
#X msg 54 137 link \$1 \$2 \$3 \$4 \$5;
#X msg 267 754 bang;
#X msg 70 171 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X text 19 38 all these messages need to be sent only once to create the structure of a physical model:;
#X text 183 128 connect two masses (\$1 and \$2) with link rigidity \$3 \, damping \$4 and length \$5;
#X text 323 181 \$5 is the exponent for the non-linear rigidity;
#X text 323 196 \$6 is the length of the link;
#X text 323 211 \$7 and \$8 are the min and max length of the link;
#X text 245 308 signal on inlet \$1 controls the X- or Y-position of mass \$2 with amplitude \$3;
#X text 270 336 the same inlet can be used to move several masses and send forces to them through multiple inForce and inPos messages for this inlet, f 66;
#X text 280 376 connect the X- or Y-position of mass \$2 to outlet \$1 with amplitude \$3, f 52;
#X text 229 246 signal on inlet \$1 sends force in X- or Y-direction to mass \$2 with amplitude \$3, f 62;
#X text 203 491 the output of an outlet is the sum of the contributions of all out* messages;
#X text 187 532 these messages interact with the simulation in real time:;
#X text 315 443 connect the velocity of mass \$2 to outlet \$1 with amplitude \$3 (either for X- or Y-direction or overall velocity), f 62;
#X text 346 551 change the position \$2 of a fixed mass \$1;
#X text 362 694 change link settings;
#X text 377 572 send force \$2 to mass \$1;
#X text 332 616 change mass settings (mass \, damping and offset of the damping (to impose a velocity), f 44;
#X text 284 787 interaction with the simulation at audio rate;
#X text 170 91 create a mass with arguments : weight of the mass (\$1) \, initial position X Y (\$2 and \$3) \, and velocity damping (\$4). A mass with weight 0 will not move., f 64;
#X text 253 274 you can send many forces to a single mass \, the resulting force will be the sum of all forces;
#X text 153 6 pmpd2d~ : 2d particle-based physical modeling for audio synthesis, f 66;
#X text 310 754 print the current state of the model in the console;
#X connect 0 0 13 0;
#X connect 3 0 13 0;
#X connect 4 0 13 0;
#X connect 6 0 13 0;
#X connect 10 0 13 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 2 0;
#X connect 13 0 2 1;
#X connect 14 0 13 0;
#X connect 15 0 13 0;
#X connect 16 0 13 0;
#X connect 17 0 13 0;
#X connect 18 0 13 0;
#X connect 19 0 13 0;
#X connect 20 0 13 0;
#X connect 21 0 13 0;
#X connect 22 0 13 0;
#X connect 23 0 13 0;
#X connect 24 0 13 0;
#X connect 25 0 13 0;
#X connect 26 0 13 0;
#X connect 27 0 13 0;
#X connect 28 0 13 0;
#X connect 29 0 13 0;
#X connect 30 0 13 0;
#X connect 31 0 13 0;
