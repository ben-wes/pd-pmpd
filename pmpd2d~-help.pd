#N canvas 716 40 703 885 10;
#X text 153 6 pmpd2d~ : 2d particle-based physical modeling for audio synthesis, f 66;
#X msg 30 74 reset;
#X obj 30 836 dac~;
#X msg 93 481 posX \$1 \$2;
#X msg 98 503 forceX \$1 \$2;
#X obj 229 769 osc~ 444;
#X text 68 74 clear everything;
#X text 110 797 arg1 : number of audio inlets (min 1);
#X text 110 811 arg2 : number of audio outlets (min 1);
#X msg 179 568 setD \$1 \$2;
#X msg 106 568 setK \$1 \$2;
#X msg 101 536 setM \$1 \$2;
#X msg 74 246 inForceX \$1 \$2 \$3;
#X msg 79 294 inPosX \$1 \$2 \$3;
#X msg 189 246 inForceY \$1 \$2 \$3;
#X msg 182 294 inPosY \$1 \$2 \$3;
#X msg 83 357 outPosX \$1 \$2 \$3;
#X msg 193 357 outPosY \$1 \$2 \$3;
#X msg 93 414 outSpeed \$1 \$2 \$3;
#X msg 87 392 outSpeedX \$1 \$2 \$3;
#X msg 208 392 outSpeedY \$1 \$2 \$3;
#X msg 168 481 posY \$1 \$2;
#X msg 183 503 forceY \$1 \$2;
#X msg 253 568 setL \$1 \$2;
#X msg 174 536 setDEnv \$1 \$2;
#X msg 265 536 setDEnvOffset \$1 \$2;
#X msg 52 146 link \$1 \$2 \$3 \$4 \$5;
#X msg 169 745 bang;
#X msg 64 177 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X text 19 38 all these messages need to be sent only once to create the structure of a physical model:;
#X text 181 140 connect two masses (\$1 and \$2) with link rigidity \$3 \, damping \$4 and length \$5;
#X text 256 176 like the link message \, but with extra arguments :;
#X text 277 191 \$5 is the exponent for the non-linear rigidity;
#X text 277 205 \$6 is the length of the link;
#X text 277 219 \$7 and \$8 are the min and max length of the link;
#X text 98 314 the same inlet can be used to move several masses and send forces to them through multiple inForce and inPos messages for this inlet, f 90;
#X text 89 266 you can send many forces to a single mass \, the resulting force will be the sum of all forces, f 92;
#X text 113 433 the output of an outlet is the sum of the contributions of all out* messages, f 76;
#X text 95 461 these messages interact with the simulation in real time:;
#X text 240 480 change the position \$2 of a fixed mass \$1;
#X text 265 503 send force \$2 to mass \$1;
#X text 202 744 print the current state of the model in the console;
#X text 284 768 interaction with the simulation at audio rate;
#X msg 124 667 setNLD \$1 \$2;
#X msg 130 689 setNLL \$1 \$2;
#X msg 216 689 setNLLMin \$1 \$2;
#X msg 321 689 setNLLMax \$1 \$2;
#X obj 30 798 pmpd2d~ 1 1;
#X text 305 240 signal on inlet \$1 sends force in X or Y direction to mass \$2 with amplitude \$3, f 43;
#X text 288 287 signal on inlet \$1 controls the X or Y position of mass \$2 with amplitude \$3, f 41;
#X text 302 350 connect the X or Y position of mass \$2 to outlet \$1 with amplitude \$3, f 38;
#X text 331 388 connect the velocity of mass \$2 to outlet \$1 with amplitude \$3 (for X or Y direction or overall velocity), f 36;
#X text 110 825 arg3 : oversample factor (useful to run the simulation faster than audio rate);
#X msg 41 108 mass \$1 \$2 \$3 \$4;
#X text 150 97 create a mass with arguments : weight of the mass (\$1) \, initial position X Y (\$2 and \$3) and velocity damping (\$4). A mass with weight 0 will not move., f 65;
#X text 394 530 change mass settings: mass \, damping and offset of the damping (to impose a velocity), f 44;
#X msg 121 645 setNLKPow \$1 \$2;
#X msg 116 623 setNLK \$1 \$2 (\$3);
#X msg 134 711 setNLLCurrent \$1 (\$2);
#X msg 112 590 setLCurrent \$1 (\$2);
#X text 325 567 change link settings: rigidity \, damping \, length;
#X text 227 622 change NLlink settings: rigidity and (optional) rigidity exponent, f 65;
#X text 272 707 mix between set length and current length (0..1) (defaults to 1 if no second argument given), f 49;
#X text 237 585 mix between set length and current length (0..1) (defaults to 1 if no second argument given), f 48;
#X text 421 689 change length \, min length and max length;
#X text 205 667 change NLlink damping;
#X text 219 644 change rigidity exponent (similar to third argument above);
#X connect 1 0 47 0;
#X connect 3 0 47 0;
#X connect 4 0 47 0;
#X connect 5 0 47 0;
#X connect 10 0 47 0;
#X connect 11 0 47 0;
#X connect 12 0 47 0;
#X connect 13 0 47 0;
#X connect 16 0 47 0;
#X connect 18 0 47 0;
#X connect 19 0 47 0;
#X connect 26 0 47 0;
#X connect 27 0 47 0;
#X connect 28 0 47 0;
#X connect 43 0 47 0;
#X connect 47 0 2 0;
#X connect 47 0 2 1;
#X connect 53 0 47 0;
#X connect 57 0 47 0;
#X connect 58 0 47 0;
#X connect 59 0 47 0;
