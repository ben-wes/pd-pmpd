#N canvas 869 3 749 918 10;
#X msg 30 74 reset;
#X text 302 166 like the link message \, but with extra arguments :;
#X text 323 181 \$5 is pow for a non-linear link;
#X text 323 196 \$6 is the lenght of the link;
#X text 226 299 connect an inlet to the position of a specific mass (\$2) \, with an amplitude factor \$3;
#X obj 31 851 dac~;
#X text 323 212 \$7 and \$8 are the min and max size of this link;
#X msg 190 556 posX \$1 \$2;
#X msg 202 576 forceX \$1 \$2;
#X text 187 537 few messages can interact in real time with the simulation;
#X text 117 841 arg3 : oversample factor (usefull to run the simulation faster than audio rate);
#X text 346 556 change the position (\$2) of a fixed mass (\$1);
#X text 394 577 send a force (\$1) to a mass (\$2);
#X obj 231 788 osc~ 444;
#X text 284 787 interaction with the simulation is at audio rate;
#X text 216 236 audio inlet \$1 send force to the mass \$2 \, with an amplitude factor \$3;
#X text 19 38 all these messages have to be sent only once to create a physical model structure;
#X text 68 73 clear everything;
#X text 227 262 You can send many forces to a single mass \, the resulting force will be the sum of all forces;
#X text 248 326 many inForce and inPos messages can be sent \, so the same inlet can be used to move and send force to diferents masses;
#X text 280 365 connect the Position of the \$2 mass to the \$1 outlet \, with amplitude \$3;
#X text 315 434 connect the Velocity of the \$2 mass to the \$1 outlet \, with amplitude \$3;
#X text 337 476 The output of an outlet is the sum of the contribution of all out* messages;
#X text 117 812 arg1 : number of audio inlets (min 1);
#X text 117 826 arg2 : number of audio outlets (min 1);
#X msg 287 685 setD \$1 \$2;
#X msg 274 663 setK \$1 \$2;
#X msg 220 597 setM \$1 \$2;
#X obj 30 813 pmpd2d~ 1 1;
#X msg 103 243 inForceX \$1 \$2 \$3;
#X msg 131 305 inPosX \$1 \$2 \$3;
#X msg 115 271 inForceY \$1 \$2 \$3;
#X msg 141 335 inPosY \$1 \$2 \$3;
#X msg 160 372 outPosX \$1 \$2 \$3;
#X msg 173 398 outPosY \$1 \$2 \$3;
#X msg 197 478 outSpeed \$1 \$2 \$3;
#X msg 181 434 outSpeedX \$1 \$2 \$3;
#X msg 188 456 outSpeedY \$1 \$2 \$3;
#X msg 267 556 posY \$1 \$2;
#X text 153 6 pmpd2d~ : 2d particular physical modelling for audio synthesis;
#X msg 44 100 mass \$1 \$2 \$3 \$4;
#X text 170 91 create a mass with argument : weight of the mass \, initial position (X Y) \, and velocity damping. A mass with no weight will not move.;
#X msg 297 576 forceY \$1 \$2;
#X text 330 599 change masses settings (mass \, damping and the offest on the damping (to impose a velocity);
#X msg 299 707 setL \$1 \$2;
#X text 376 686 change links settings;
#X msg 239 617 setDEnv \$1 \$2;
#X msg 254 640 setDEnvoffset \$1 \$2;
#X text 183 128 connect 2 masses (\$1 and \$2) \, with a link rigidity \$3 and damping \$4 \, length \$5;
#X msg 54 137 link \$1 \$2 \$3 \$4 \$5;
#X msg 267 754 bang;
#X text 310 754 post the current state of the PM in pd log.;
#X msg 70 171 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X connect 0 0 28 0;
#X connect 7 0 28 0;
#X connect 8 0 28 0;
#X connect 13 0 28 0;
#X connect 25 0 28 0;
#X connect 26 0 28 0;
#X connect 27 0 28 0;
#X connect 28 0 5 0;
#X connect 28 0 5 1;
#X connect 29 0 28 0;
#X connect 30 0 28 0;
#X connect 31 0 28 0;
#X connect 32 0 28 0;
#X connect 33 0 28 0;
#X connect 34 0 28 0;
#X connect 35 0 28 0;
#X connect 36 0 28 0;
#X connect 37 0 28 0;
#X connect 38 0 28 0;
#X connect 40 0 28 0;
#X connect 42 0 28 0;
#X connect 44 0 28 0;
#X connect 46 0 28 0;
#X connect 47 0 28 0;
#X connect 49 0 28 0;
#X connect 50 0 28 0;
#X connect 52 0 28 0;
